{"version":3,"sources":["src/app.js","src/auth-config.js","src/environment.js","src/main.js","src/modules/home.js","src/modules/list.js","src/resources/index.js","src/resources/data/data-services.js","src/resources/data/todos.js","src/resources/data/users.js","src/resources/elements/flatpickr.js","src/resources/value-converters/completed.js","src/resources/value-converters/date-format.js"],"names":["App","configureRouter","config","router","addPipelineStep","map","route","moduleId","name","auth","authConfig","baseUrl","loginUrl","tokenName","authHeader","authToken","logoutRedirect","debug","testing","configure","window","regeneratorRuntime","aurelia","use","standardConfiguration","plugin","baseConfig","feature","developmentLogging","start","then","setRoot","Home","users","loginError","showLogin","login","email","password","sessionStorage","setItem","JSON","stringify","response","user","navigate","catch","console","log","error","showRegister","firstname","lastname","registerError","save","serverResponse","List","todos","message","parse","getItem","showList","priorities","showCompleted","editTodo","todo","todoObj","saveTodo","alert","todoId","_id","filesToUpload","length","uploadFile","activate","getUserTodo","createTodo","description","dateDue","Date","userId","priority","toggleShowCompleted","files","formData","FormData","forEach","item","index","append","data","uploadFiles","TODO_SERVICE","deleteTodo","completeTodo","completed","changeFiles","Array","push","removeFile","splice","logout","removeItem","globalResources","DataServices","http","httpClient","BASE_URL","withBaseUrl","withDefaults","credentials","headers","withInterceptor","request","method","url","status","get","fetch","json","post","content","body","object","put","delete","ToDos","todosArray","id","i","Users","USER_SERVICE","FlatPickerCustomElement","Element","defaultBindingMode","twoWay","element","bind","defaultConfig","altInput","altFormat","wrap","_config","Object","assign","onChange","onMonthChange","onYearChange","attached","flatpickr","querySelector","selectedDates","dateStr","instance","value","valueChanged","newDate","undefined","setDate","CompletedValueConverter","toView","array","filter","DateFormatValueConverter","format"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {AuthorizeStep} from 'aurelia-auth';\n\nexport class App {\n    configureRouter(config, router) {\n      this.router = router;\n      config.addPipelineStep('authorize', AuthorizeStep); \n      config.map([\n        { \n      route: ['', 'home'],\n       moduleId: './modules/home',\n       name: 'Home' \n        },\n        {\n       route: 'list',\n       moduleId: './modules/list',\n       name: 'List', \n       auth: true \n       }\n      ]);\n    }\n  }\n  \n","var authConfig = {\r\n    baseUrl: \"http://localhost:5000/api\",\r\n    loginUrl: '/users/login',\r\n    tokenName: 'token',\r\n    authHeader: 'Authorization',\r\n    authToken: '',\r\n    logoutRedirect: '#/home'\r\n  }\r\n  \r\n  export default authConfig;\r\n  ","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\nimport config from './auth-config';\nimport regeneratorRuntime from 'regenerator-runtime';\nwindow.regeneratorRuntime = regeneratorRuntime;\n\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .plugin('aurelia-auth', (baseConfig)=>{\n      baseConfig.configure(config);\n })\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\nimport { Users } from '../resources/data/users';\r\nimport { AuthService } from 'aurelia-auth';\r\n\r\n\r\n@inject(Router, Users, AuthService)\r\nexport class Home {\r\n    constructor(router, users, auth) {\r\n        this.router = router;\r\n        this.auth = auth;\r\n        this.users = users;\r\n        this.loginError = '';\r\n        this.showLogin = true;\r\n        \r\n    }\r\n\r\n    login() {\r\n        return this.auth.login(this.email, this.password)\r\n            .then(response => {\r\n                sessionStorage.setItem(\"user\", JSON.stringify(response.user));\r\n                this.loginError = \"\";\r\n                this.router.navigate('list');\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                this.loginError = \"Invalid credentials.\";\r\n            });\r\n    };\r\n\r\n    showRegister() {\r\n        this.user = {\r\n            firstname: \"\",\r\n            lastname: \"\",\r\n            email: \"\",\r\n            password: \"\"\r\n\r\n        }\r\n\r\n        this.registerError = \"\";\r\n        this.showLogin = false;\r\n    }\r\n\r\n    async save() {\r\n        let serverResponse = await this.users.save(this.user);\r\n        if (!serverResponse.error) {\r\n            this.showLogin = true;\r\n        } else {\r\n            this.registerError = \"There was a problem registering the user.\"\r\n        }\r\n    }\r\n}\r\n","import {inject} from 'aurelia-framework';\r\nimport {Router} from 'aurelia-router';\r\nimport { AuthService } from 'aurelia-auth';\r\nimport { ToDos } from '../resources/data/todos';\r\n\r\n@inject(Router, AuthService, ToDos)\r\nexport class List {\r\n  constructor(router, auth, todos) {\r\n          this.router = router;\r\n          this.auth = auth;\r\n          this.todos = todos;\r\n\r\n          this.message = 'List';\r\n          this.user = JSON.parse(sessionStorage.getItem('user'));\r\n          this.showList = true;\r\n          this.priorities = ['Low','Medium', 'High', 'Critical']\r\n          this.showCompleted = false;\r\n     \r\n  }\r\n\r\n  editTodo(todo){\r\n            this.todoObj = todo;\r\n            this. showList = false;\r\n        }\r\n    \r\n\r\n  async saveTodo(){\r\n\t\tif(this.todoObj){\t\t\r\n\t\t\tlet response = await this.todos.save(this.todoObj);\r\n\t\t\tif(response.error){\r\n\t\t\t\talert(\"There was an error creating the ToDo\");\r\n\t\t\t} else {\r\n\t\t\t\t  var todoId = response._id;\r\n                        if(this.filesToUpload && this.filesToUpload.length){\r\n                            await this.todos.uploadFile(this.filesToUpload, this.user._id, todoId);\r\n                            this.filesToUpload = [];\r\n                        }                    \r\n\t\t\t}\r\n\t\t\tthis.showList = true;\r\n\t\t}\r\n\t}\r\n\r\n\r\n  async activate(){\r\n    await this. todos.getUserTodo(this.user._id);\r\n  }\r\n\r\n    \r\n createTodo(){\t\r\n    this.todoObj = {\r\n      todo: \"\",\r\n      description: \"\",\r\n      dateDue: new Date(),\r\n       userId: this.user._id,\r\n      priority: this.priorities[0]\r\n    }\r\n    this.showList = false;\t\t\r\n  \r\n}\r\n\r\n\r\ntoggleShowCompleted(){\r\n      this.showCompleted = !this.showCompleted;\r\n  }\r\n\r\n  uploadFile(files, userId, todoId){\r\n            let formData = new FormData();\r\n          files.forEach((item, index) => {\r\n      formData.append(\"file\" + index, item);\r\n            });\r\n        \r\n      let response = this.data.uploadFiles(formData, this.TODO_SERVICE + \t\t\"/upload/\" + userId + \"/\" + todoId);\r\n      return response;\r\n    }\r\n    \r\n  // maybe?\r\n  deleteTodo(todo){\r\n          this.todos.deleteTodo(todo._id);\r\n      }\r\n\r\n  completeTodo(todo){\r\n        todo.completed = !todo.completed;\r\n        this.todoObj = todo;\r\n        this.saveTodo();\r\n    }\r\n    \r\n    changeFiles(){\r\n          this.filesToUpload = new Array(); \r\n          this.filesToUpload.push(this.files[0]);\r\n      }\r\n      removeFile(index){\r\n          this.filesToUpload.splice(index,1);\r\n      }\r\n      \r\n  \r\n\r\n  logout(){\r\n    sessionStorage.removeItem('user');\r\n    this.auth.logout();\r\n\r\n\r\n  }\r\n}\r\n\r\n  \r\n\r\n\r\n","export function configure(config) {\n  config.globalResources([\n    './value-converters/date-format',\n    './value-converters/completed',\n    './elements/flatpickr'\n  ]);\n}\n","import { inject } from 'aurelia-framework';\r\nimport {HttpClient, json} from 'aurelia-fetch-client';\r\n\r\n@inject(HttpClient)\r\nexport class DataServices {\r\n\r\n\tconstructor(http) {\r\n\t\tthis.httpClient = http;\r\n\t\tthis.BASE_URL = \"http://localhost:5000/api/\";\r\n        this.httpClient.configure(config => {\r\n            config\r\n                .withBaseUrl(this.BASE_URL)\r\n                .withDefaults({\r\n                credentials: 'same-origin',\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'X-Requested-With': 'Fetch'\r\n                }\r\n                })\r\n                .withInterceptor({\r\n                request(request) {\r\n                    console.log(`Requesting ${request.method} ${request.url}`);\r\n                    return request;\r\n                },\r\n                response(response) {\r\n                    console.log(`Received ${response.status} ${response.url}`);\r\n                    return response;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n                \r\n\r\n   get(url) {\r\n            return this.httpClient.fetch(url)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    return data;\r\n                })\r\n                .catch(error => {\r\n                    return error;\r\n                });\r\n        }\r\n\r\n\r\n        post(content, url) {\r\n            return this.httpClient\r\n                .fetch(url, {\r\n                    method: 'post',\r\n                    body: json(content)\r\n                })\r\n                .then(response => response.json())\r\n                .then(object => {\r\n                    return object;\r\n                })\r\n                .catch(error => {\r\n                    return error;\r\n                });\r\n        }\r\n    \r\n        put(content, url) {\r\n            return this.httpClient\r\n                .fetch(url, {\r\n                    method: 'put',\r\n                    body: json(content)\r\n                })\r\n                .then(response => response.json())\r\n                .then(object => {\r\n                    return object;\r\n                })\r\n                .catch(error => {\r\n                    return error;\r\n                });\r\n        }\r\n                \r\n        delete(url) {\r\n            return this.httpClient\r\n                .fetch(url, {\r\n                    method: 'delete'\r\n                })\r\n                .then(response => response.json())\r\n                .then(object => {\r\n                    return object;\r\n                })\r\n                .catch(error => {\r\n                    return error ;\r\n                });\r\n        }\r\n\r\n        uploadFiles(files, url){\r\n                return this.httpClient\r\n                .fetch(url, {\r\n                    method: 'post',\r\n                    body: files\r\n                })\r\n                .then(response => response.json())\r\n                .then(object => {\r\n                    return object;\r\n                })\r\n                .catch(error => {\r\n                    return error;\r\n                });\r\n            }\r\n            \r\n        };\r\n        \r\n\r\n            \r\n\r\n","import {inject} from 'aurelia-framework';\r\nimport {DataServices} from './data-services';\r\n\r\n@inject(DataServices)\r\nexport class ToDos {\r\n    \r\n    constructor(data) {\r\n        \t\tthis.data = data;\r\n        \t\tthis.TODO_SERVICE = 'todos';\r\nthis.todosArray =[];\r\n\r\n   \t\t }\r\nasync getUserTodo(id){\r\n    let response = await this.data.get(this.TODO_SERVICE + \"/user/\" +id);\r\n    if(!response.error && !response.message){\r\n        this.todosArray = response;\r\n    }\r\n}\r\n\r\nasync save(todo){\r\n    if(todo){\r\n        if(!todo._id){\r\n            let serverResponse = await this.data.post(todo, this.TODO_SERVICE);\r\n            if(!serverResponse.error){\r\n                this.todosArray.push(serverResponse);\r\n            }\r\n            return serverResponse;\r\n        } else {\r\n            let response = await this.data.put(todo, this.TODO_SERVICE + \"/\" + todo._id);\r\n            if(!response.error){\r\n                \r\n            }\r\n            return response;\r\n        }\r\n    }\r\n\r\n\r\n}\r\nasync deleteTodo(id){\r\n    let response = await this.data.delete(this.TODO_SERVICE + \"/\" + id);\r\n    if(!response.error){\r\n        for(let i = 0; i < this.todosArray.length; i++){\r\n            if(this.todosArray[i]._id === id){\r\n                this.todosArray.splice(i,1);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n}\r\n\r\n","import {inject} from 'aurelia-framework';\r\nimport {DataServices} from './data-services';\r\n\r\n@inject(DataServices)\r\nexport class Users {\r\n\r\nconstructor(data) {\r\n        this.data = data;\r\n        this.USER_SERVICE = 'users';\r\n    }\r\nasync save(user){\r\n    if(user){\r\n        try{\r\n            let serverResponse = await this.data.post(user, this.USER_SERVICE);\r\n            return serverResponse;\r\n         } catch (error) {\r\n            console.log(error);\r\n            return error;\r\n        }\r\n    }\r\n}\r\n\r\n}\r\n","\r\nimport {inject, bindable, bindingMode} from 'aurelia-framework';\r\nimport Flatpickr from 'flatpickr';\r\n@inject(Element)\r\nexport class FlatPickerCustomElement {\r\n@bindable({defaultBindingMode: bindingMode.twoWay}) value;\r\nconstructor(element) {\r\n  this.element = element;\r\n}\r\nbind() {\r\n      const defaultConfig = {\r\n                \taltInput: true,\r\n                \taltFormat: \"F j, Y\",\r\n        wrap: true\r\n            };\r\n          this._config = Object.assign({}, defaultConfig);\r\n            this._config.onChange = this._config.onMonthChange = this._config.onYearChange = this.onChange.bind(this);\r\n        }\r\n attached() {\r\n            this.flatpickr = new Flatpickr(this.element.querySelector('.aurelia-flatpickr'), this._config);\r\n         }\r\n        onChange(selectedDates, dateStr, instance) {\r\n                this.value = selectedDates[0] \r\n        }\r\n        valueChanged() {\r\n                if (!this.flatpickr) {\r\n                    return;\r\n                }\r\n               if (this.value === this.flatpickr.selectedDates[0]){\r\n                    return;\r\n                }\r\n               let newDate = this.value ? this.value : undefined;      \r\n              this.flatpickr.setDate(newDate);\r\n            }\r\n            }\r\n            \r\n","export class CompletedValueConverter {\r\n      \r\n       toView(array, value) {\r\n         if(!value){\r\n          return array.filter(item => {\r\n            return !item.completed;\r\n          })\r\n         } else {\r\n           return array;\r\n         }\r\n       }\r\n      }\r\n    ","import moment from 'moment';\r\nexport class DateFormatValueConverter {\r\ntoView(value) {\r\nif(value === undefined || value === null){\r\n\treturn;\r\n    \t\t}\r\n    \r\n    \t\treturn moment(value).format('MMM Do YYYY');\r\n\t}\r\n}\r\n"],"sourceRoot":".."}